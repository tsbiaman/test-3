site:
  id: local-3-backend
  name: "LOCAL_3 Backend (Flask + DBs)"
  github_repo: "https://github.com/tsbiaman/testing"

  build:
    context: "LOCAL_3/backend"
    dockerfile: "LOCAL_3/backend/Dockerfile"

  defaults:
    branch: main
    domain_suffix: "tsbi.fun"
    port: 8080
    replicas: 1
    resources:
      backend:
        cpus: 0.5
        memory: 512M
    database: true
    redis: true

  environments:
    production:
      enabled: true
      branch: main
      domain: local3-backend.tsbi.fun
      port: 8080
      replicas: 2
      database: true
      redis: true
    staging:
      enabled: true
      branch: develop
      domain: staging-local3-backend.tsbi.fun
      port: 8080
      replicas: 1
      database: true
      redis: true
    develop:
      enabled: true
      branch: develop
      domain: develop-local3-backend.tsbi.fun
      port: 8080
      replicas: 1
      database: true
      redis: true
    preview:
      enabled: true
      branch: develop
      domain: preview-local3-backend.tsbi.fun
      port: 8080
      replicas: 1
      database: true
      redis: true