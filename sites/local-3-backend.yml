site:
  id: local-3-backend
  name: "LOCAL_3 Backend (Flask + DBs)"
  github_repo: "https://github.com/tsbiaman/test-3"

  build:
    context: "LOCAL_3/backend"
    dockerfile: "LOCAL_3/backend/Dockerfile"

  defaults:
    branch: main
    domain_suffix: "tsbi.fun"
    port: auto
    replicas: 1
    resources:
      backend:
        cpus: 0.5
        memory: 512M
    database: true
    redis: true

  environments:
    production:
      enabled: true
      branch: main
      domain: local-3-backend.tsbi.fun
      # port: auto
      replicas: 2
      database: true
      redis: true
      health_check:
        path: "/api/health"
        scheme: "https"
        rollback: false
    staging:
      enabled: true
      branch: develop
      domain: staging-local-3-backend.tsbi.fun
      # port: auto
      replicas: 1
      database: true
      redis: true
    develop:
      enabled: true
      branch: develop
      domain: develop-local-3-backend.tsbi.fun
      # port: auto
      replicas: 1
      database: true
      redis: true
    preview:
      enabled: true
      branch: develop
      domain: preview-local-3-backend.tsbi.fun
      # port: auto
      replicas: 1
      database: true
      redis: true